---
id: section-03
title: Ignite React.js · Chapter 01 · Section 03
sidebar_label: Section 03
description: Ignite React.js by RocketSeat.
keywords:
  - Alex Bleggi
image: /static/other/img/profile.png
slug: /ignite/react-js/course/chapter-01/section-03
toc_max_heading_level: 4
hide_title: true
---

import useBaseUrl from '@docusaurus/useBaseUrl';

# Os motores do React

## [Iterando no JSX](https://app.rocketseat.com.br/node/chapter-i-6/group/os-motores-do-react/lesson/iterando-no-jsx)

```jsx {8-37,46-54} title="src/App.jsx"
import { Header } from './components/Header';
import { Sidebar } from './components/Sidebar';
import { Post } from './components/Post';

import './global.css';
import styles from './App.module.css';

const posts = [
  {
    id: 1,
    author: {
      avatarUrl: 'https://avatars.githubusercontent.com/u/85613172?v=4',
      name: 'John Doe',
      role: 'Web Developer'
    },
    content: [
      { type: 'paragraph', content: 'Lorem, ipsum.'},
      { type: 'paragraph', content: 'Lorem ipsum dolor sit, amet consectetur adipisicing elit. Esse autem excepturi qui, laborum, alias exercitationem assumenda praesentium eligendi suscipit fuga commodi nostrum minus dolores itaque.'},
      { type: 'link', content: 'Lorem, ipsum dolor.'},
    ],
    publishedAt: new Date('2022-06-25 20:00:00')
  },
  {
    id: 2,
    author: {
      avatarUrl: 'https://avatars.githubusercontent.com/u/85613172?v=4',
      name: 'John Doe 2',
      role: 'Web Developer'
    },
    content: [
      { type: 'paragraph', content: 'Lorem, ipsum.'},
      { type: 'paragraph', content: 'Lorem ipsum dolor sit, amet consectetur adipisicing elit. Esse autem excepturi qui, laborum, alias exercitationem assumenda praesentium eligendi suscipit fuga commodi nostrum minus dolores itaque.'},
      { type: 'link', content: 'Lorem, ipsum dolor.'},
    ],
    publishedAt: new Date('2022-06-26 20:00:00')
  }
]

export function App() {
  return (
    <div>
      <Header />
      <div className={styles.wrapper}>
        <Sidebar />
        <main>
          {posts.map(post => {
            return (
              <Post
                author={post.author}
                content={post.content}
                publishedAt={post.publishedAt}
              />
            )
          })}
        </main>
      </div>
    </div>
  );
}
```

## [Propriedades do Post](https://app.rocketseat.com.br/node/chapter-i-6/group/os-motores-do-react/lesson/propriedades-do-post)

```bash
# npm
npm i date-fns

# yarn
yarn add date-fns
```

```jsx {1,2,7,8-12,14-17,23,25,26,30,31,33,37-47} title="src/components/Post.jsx"
import { format, formatDistanceToNow } from 'date-fns';
import ptBR from 'date-fns/locale/pt-BR';
import { Avatar } from './Avatar';
import { Comment } from './Comment';
import styles from './Post.module.css';

export function Post({ author, publishedAt, content }) {
  const publishedDateFormatted = format(
    publishedAt,
    "d 'de' LLLL 'às' HH:mm'h'",
    { locale: ptBR }
  );

  const publishedDaterelativeToNow = formatDistanceToNow(publishedAt, {
    locale: ptBR,
    addSuffix: true,
  });

  return (
    <article className={styles.post}>
      <header>
        <div className={styles.author}>
          <Avatar src={author.avatarUrl} />
          <div className={styles.authorInfo}>
            <strong>{author.name}</strong>
            <span>{author.role}</span>
          </div>
        </div>
        <time
          title={publishedDateFormatted}
          dateTime={publishedAt.toISOString()}
        >
          {publishedDaterelativeToNow}
        </time>
      </header>
      <div className={styles.content}>
        {content.map((line) => {
          if (line.type === 'paragraph') {
            return <p>{line.content}</p>;
          } else if (line.type === 'link') {
            return (
              <p>
                <a href="#">{line.content}</a>
              </p>
            );
          }
        })}
      </div>

      <form className={styles.commentForm}>
        <strong>Deixe seu feedback</strong>
        <textarea placeholder="Deixe um comentário" />
        <footer>
          <button type="submit">Publicar</button>
        </footer>
      </form>

      <div className={styles.commentList}>
        <Comment />
        <Comment />
        <Comment />
      </div>
    </article>
  );
}
```

## [Estado](https://app.rocketseat.com.br/node/chapter-i-6/group/os-motores-do-react/lesson/estado-1)

```jsx {1,9,22-26,59,68-70} title="src/components/Post.jsx"
import { useState } from 'react';
import { format, formatDistanceToNow } from 'date-fns';
import ptBR from 'date-fns/locale/pt-BR';
import { Avatar } from './Avatar';
import { Comment } from './Comment';
import styles from './Post.module.css';

export function Post({ author, publishedAt, content }) {
  const [comments, setComments] = useState([1, 2]);

  const publishedDateFormatted = format(
    publishedAt,
    "d 'de' LLLL 'às' HH:mm'h'",
    { locale: ptBR }
  );

  const publishedDaterelativeToNow = formatDistanceToNow(publishedAt, {
    locale: ptBR,
    addSuffix: true,
  });

  function handleCreateNewComment() {
    event.preventDefault();

    setComments([...comments, comments.length + 1]);
  }

  return (
    <article className={styles.post}>
      <header>
        <div className={styles.author}>
          <Avatar src={author.avatarUrl} />
          <div className={styles.authorInfo}>
            <strong>{author.name}</strong>
            <span>{author.role}</span>
          </div>
        </div>
        <time
          title={publishedDateFormatted}
          dateTime={publishedAt.toISOString()}
        >
          {publishedDaterelativeToNow}
        </time>
      </header>
      <div className={styles.content}>
        {content.map((line) => {
          if (line.type === 'paragraph') {
            return <p>{line.content}</p>;
          } else if (line.type === 'link') {
            return (
              <p>
                <a href="#">{line.content}</a>
              </p>
            );
          }
        })}
      </div>

      <form onSubmit={handleCreateNewComment} className={styles.commentForm}>
        <strong>Deixe seu feedback</strong>
        <textarea placeholder="Deixe um comentário" />
        <footer>
          <button type="submit">Publicar</button>
        </footer>
      </form>

      <div className={styles.commentList}>
        {comments.map((comment) => {
          return <Comment />;
        })}
      </div>
    </article>
  );
}
```

## [Inserindo comentários](https://app.rocketseat.com.br/node/chapter-i-6/group/os-motores-do-react/lesson/inserindo-comentarios)

- **Programação Imperativa**

O que deve ser feito (passo-a-passo).

```javascript {4,8}
function handleCreateNewComment() {
  event.preventDefault();

  const newCommentText = event.target.comment.value;

  setComments([...comments, newCommentText]);

  event.target.comment.value = '';
}
```

```jsx {1,3}
<form onSubmit={handleCreateNewComment} className={styles.commentForm}>
  <textarea
    name="comment"
    placeholder="Deixe um comentário"
    onChange={handleNewCommentChange}
  />
</form>
```

- **Programação Declarativa**

Quais as condições para se ter o resultado final.

```javascript {1,8,11-13}
const [newCommentText, setNewCommentText] = useState('');

function handleCreateNewComment() {
  event.preventDefault();

  setComments([...comments, newCommentText]);

  setNewCommentText('');
}

function handleNewCommentChange() {
  setNewCommentText(event.target.value);
}
```

```jsx {5}
<form onSubmit={handleCreateNewComment} className={styles.commentForm}>
  <textarea
    name="comment"
    placeholder="Deixe um comentário"
    value={newCommentText}
    onChange={handleNewCommentChange}
  />>
</form>
```

```jsx {9,11,27,29,32-34,70,72,73,82} title="src/components/Post.jsx"
import { useState } from 'react';
import { format, formatDistanceToNow } from 'date-fns';
import ptBR from 'date-fns/locale/pt-BR';
import { Avatar } from './Avatar';
import { Comment } from './Comment';
import styles from './Post.module.css';

export function Post({ author, publishedAt, content }) {
  const [comments, setComments] = useState(['Lorem ipsum dolor sit.']);

  const [newCommentText, setNewCommentText] = useState('');

  const publishedDateFormatted = format(
    publishedAt,
    "d 'de' LLLL 'às' HH:mm'h'",
    { locale: ptBR }
  );

  const publishedDaterelativeToNow = formatDistanceToNow(publishedAt, {
    locale: ptBR,
    addSuffix: true,
  });

  function handleCreateNewComment() {
    event.preventDefault();

    setComments([...comments, newCommentText]);

    setNewCommentText('');
  }

  function handleNewCommentChange() {
    setNewCommentText(event.target.value);
  }

  return (
    <article className={styles.post}>
      <header>
        <div className={styles.author}>
          <Avatar src={author.avatarUrl} />
          <div className={styles.authorInfo}>
            <strong>{author.name}</strong>
            <span>{author.role}</span>
          </div>
        </div>
        <time
          title={publishedDateFormatted}
          dateTime={publishedAt.toISOString()}
        >
          {publishedDaterelativeToNow}
        </time>
      </header>
      <div className={styles.content}>
        {content.map((line) => {
          if (line.type === 'paragraph') {
            return <p>{line.content}</p>;
          } else if (line.type === 'link') {
            return (
              <p>
                <a href="#">{line.content}</a>
              </p>
            );
          }
        })}
      </div>

      <form onSubmit={handleCreateNewComment} className={styles.commentForm}>
        <strong>Deixe seu feedback</strong>
        <textarea
          name="comment"
          placeholder="Deixe um comentário"
          value={newCommentText}
          onChange={handleNewCommentChange}
        />
        <footer>
          <button type="submit">Publicar</button>
        </footer>
      </form>

      <div className={styles.commentList}>
        {comments.map((comment) => {
          return <Comment content={comment} />;
        })}
      </div>
    </article>
  );
}
```

```jsx {5,29} title="src/components/Comment.jsx"
import { ThumbsUp, Trash } from 'phosphor-react';
import { Avatar } from './Avatar';
import styles from './Comment.module.css';

export function Comment({ content }) {
  return (
    <div className={styles.comment}>
      <Avatar
        hasBorder={false}
        src="https://avatars.githubusercontent.com/u/85613172?v=4"
      />
      <div className={styles.commentBox}>
        <div className={styles.commentContent}>
          <header>
            <div className={styles.authorAndTime}>
              <strong>John Doe</strong>
              <time
                title="01 de julho às 08:00h"
                dateTime="2022-07-01 08:00:00"
              >
                Cerca de 1h atrás
              </time>
            </div>

            <button title="Deletar comentário">
              <Trash size={24} />
            </button>
          </header>
          <p>{content}</p>
        </div>
        <footer>
          <button>
            <ThumbsUp />
            Aplaudir <span>20</span>
          </button>
        </footer>
      </div>
    </div>
  );
}
```
