---
id: monorepo
title: Hive Â· Monorepo
sidebar_label: Monorepo
description: Just another UI framework.
keywords:
  - Alex Bleggi
image: /static/other/img/profile.png
slug: /projects/hive/monorepo
toc_max_heading_level: 4
hide_title: true
---

import useBaseUrl from '@docusaurus/useBaseUrl';

# Monorepo

Step by step **Monorepo** setup for Hive UI framework.

## 01. Repository initialization

- **[`Docs`](https://github.com/git-guides)**

```bash
mkdir hive
cd hive
git init
```

```text title="README.md"
# hive
```

```bash
git add README.md
git commit -m "first commit"
git branch -M main
git remote add origin https://github.com/alexbjr369/hive.git
git push -u origin main
```

```bash
git checkout -b monorepo
git push -u origin monorepo
```

## 02. EditorConfig setup

- **[`Docs`](https://editorconfig.org)**

```text title=".editorconfig"
root = true

[*]
charset = utf-8
end_of_line = lf
indent_style = space
indent_size = 2
insert_final_newline = true
trim_trailing_whitespace = true
```

## 03. Gitignore initialization

- **[`Docs`](https://git-scm.com/docs/gitignore)**

```text title=".gitignore"
node_modules
yarn-error.log
```

## 04. Project initialization

- **[`Docs`](https://classic.yarnpkg.com/en/docs/cli/init)**

```bash
yarn init
question name (hive): @alexbjr369/hive
question version (1.0.0): 0.0.0
question description: Just another UI framework.
question entry point (index.js):
question repository url (https://github.com/alexbjr369/hive.git):
question author (alexbjr369 <alexbjr369@gmail.com>): Alex Bleggi <alexbjr369@gmail.com>
question license (MIT):
question private:
```

## 05. Additional package information

- **[`Docs`](https://docs.npmjs.com/cli/v8/configuring-npm/package-json)**

```json title="package.json"
{
  "bugs": "https://github.com/alexbjr369/hive/issues",
  "homepage": "https://alexbleggi.netlify.app/hive"
}
```

## 06. Format on save configuration

- **[`Docs`](https://code.visualstudio.com/docs/getstarted/settings#_settingsjson)**

```json title=".vscode/settings.json"
{
  "editor.codeActionsOnSave": {
    "source.fixAll": true
  },
  "editor.formatOnSave": true
}
```

## 07. Prettier

- **[`Docs`](https://prettier.io/docs/en/index.html)**

```bash
yarn add prettier -D
```

```json title="package.json"
{
  "prettier": {
    "singleQuote": true
  }
}
```

```json title=".vscode/settings.json"
{
  "editor.defaultFormatter": "esbenp.prettier-vscode"
}
```

## 08. Yarn workspaces

- **[`Docs`](https://classic.yarnpkg.com/lang/en/docs/workspaces)**

```json title="package.json"
{
  "private": true,
  "workspaces": {
    "packages": [
      "packages/*"
    ]
  }
}
```

## 09. LICENSE creation

- **[`Docs`](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/licensing-a-repository)**

```text title="LICENSE.md"
MIT License

Copyright (c) 2022-present Alex Bleggi.

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
```

## 10. Lerna setup

- **[`Docs`](https://lerna.js.org/)**
- **[`Package`](https://www.npmjs.com/package/lerna)**

```bash
yarn add -WD lerna
```

- **[`Docs`](https://github.com/lerna/lerna/tree/main/commands/init#readme)**

```bash
yarn lerna init --independent
```

```text title=".gitignore"
lerna-debug.log
```

## 11. Lerna and Yarn integration

- **[`Docs`](https://github.com/lerna/lerna#lernajson)**

```json title="lerna.json"
{
  "npmClient": "yarn",
  "useWorkspaces": true,
}
```

## 12. Lerna versioning

- **[`Docs`](https://github.com/lerna/lerna/tree/main/commands/version#lernaversion)**

```bash
yarn lerna version
```

```json title="lerna.json"
{
  "command": {
    "version": {
      "message": "chore(release): publish"
    }
  }
}
```

## 13. Npm local registry

```bash
npm set registry http://localhost:4873
```

## 14. Verdaccio setup

- **[`Docs`](https://verdaccio.org/docs/installation/)**
- **[`Package`](https://www.npmjs.com/package/verdaccio)**

```bash
yarn add -WD verdaccio
```

```bash
yarn verdaccio
```

```bash
npm adduser --registry http://localhost:4873/
```

## 15. Lerna publish registry

```json title="lerna.json"
{
  "command": {
    "publish": {
      "registry": "http://localhost:4873/"
    }
  }
}
```

```bash
yarn lerna publish from-package
```

```bash
yarn lerna publish from-git
```

## 16. Lerna change ignores

```json title="lerna.json"
{
  "ignoreChanges": [
    "**/.md"
  ]
}
```

## 17. Conventional commits and changelog generation

```bash
yarn lerna version --conventional-commits
```

## 18. Commitzen Setup

- **[`Docs`](https://github.com/commitizen/cz-cli)**
- **[`package`](https://www.npmjs.com/package/commitizen)**

```bash
yarn add -WD commitizen cz-conventional-changelog
```

```json title="package.json"
{
  "scripts": {
    "commit": "cz",
  }
}
```

```json title="package.json"
{
  "config": {
    "commitizen": {
      "path": "./node_modules/cz-conventional-changelog"
    }
  }
}
```

## 19. Commitlint and Husky integration

- **[`Docs: commitlint`](https://commitlint.js.org/#/guides-local-setup?id=install-husky)**
- **[`Docs: husky`](https://typicode.github.io/husky/#/?id=install)**
- **[`Package`](https://www.npmjs.com/package/husky)**

```bash
yarn add -WD husky
```

```bash
yarn husky install
```

```json title="package.json"
{
  "scripts": {
    "prepare": "npx husky install"
  }
}
```

```bash
yarn husky add .husky/commit-msg 'yarn commitlint --edit $1'
```

## 20. Commitlint setup

- **[`Docs: conventional commits`](https://www.conventionalcommits.org/en/v1.0.0/)**
- **[`Docs: commitlint`](https://commitlint.js.org/#/guides-local-setup)**
- **[`Package: @commitlint/cli`](https://www.npmjs.com/package/@commitlint/cli)**
- **[`Package: @commitlint/config-conventional`](https://www.npmjs.com/package/@commitlint/config-conventional)**

```bash
yarn add -WD @commitlint/cli @commitlint/config-conventional
```

```javascript title="commitlint.config.js"
module.exports = {
  extends: [
    '@commitlint/config-conventional',
  ],
};
```

## 21. Commitizen and Husky Integration

- **[`Docs`](https://github.com/commitizen/cz-cli#husky)**
- **[`BUG`](https://github.com/commitizen/cz-cli/issues/709)**

```bash
yarn husky add .husky/prepare-commit-msg 'exec < /dev/tty && npx cz --hook || true'
```

## 22. Conventional Commits scope personalization

- **[`@commitlint/config-lerna-scopes`](https://www.npmjs.com/package/@commitlint/config-lerna-scopes)**

```bash
yarn add -WD @commitlint/config-lerna-scopes
```

```javascript title="commitlint.config.js"
const {utils: {getPackages}} = require('@commitlint/config-lerna-scopes');

module.exports = {
  "extends": [
    "@commitlint/config-conventional",
    "@commitlint/config-lerna-scopes"
  ],
 rules: {
  'scope-enum': async ctx =>
    [2, 'always', [...(await getPackages(ctx)),
      // Insert custom scopes below:
      'release'
    ]]
 }
}
```
